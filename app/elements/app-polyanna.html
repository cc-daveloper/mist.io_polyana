<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">


<dom-module id="app-polyanna">
    <template>
      <style>
        :host{
          text-align: center;
          color: #000000;
        }
       #panel1{
           width: 150px;
           margin-left: 68px;
           float: left;
           font-weight: bold;
       }
       #panel2{
           display: block;
           margin-right: 68px;
           float: right;
           font-weight: bold;
       }
      </style>
      <h2 id="show">Hello!1!</h2>
        <br>
        <!--<div id="panel1">here</div>
        <div id="panel2">here</div>
        <br></br>-->
        <!--<iframe src="http://localhost:3000/dashboard-solo/db/mydashboard?panelId=4&fullscreen&from=1455559611280&to=1456243760954" width="1250" height="900" align="center" frameborder="0"></iframe> -->
        <!-- <chart-bar>hello</chart-bar> -->
        <script src="https://gist.github.com/anatolijd/73b1360c9780c0d161b1.js"></script>
        <br></br>
        <template is="dom-repeat" items="[[rows]]">
          <row-element height="[[rowheight(index)]]" title="[[_fillrow1(index)]]" row="[[thisRow(index)]]"></row-element>
          <p>{{item.title}}</p>
         </template>
      <iron-ajax
      auto
      url="http://localhost:5000/api/dashboards/home"
      headers='{"Authorization": "Bearer eyJrIjoiTDdKaHdKNjJFT05nWU81dHlnYVVkbGdiUmVIY1lYUWkiLCJuIjoibXlrZXkiLCJpZCI6Mn0="}'
      handle-as="json"
      method="GET"
      on-response="_handleResponse"
      debounce-duration="300"
    ></iron-ajax>

    </template>
    <script>

        Polymer({
          is: 'app-polyanna',

          properties: {
            response: Object,
            rows: {type:Array, value: []},
            // rows:
          },
          _handleResponse:function(data){
            this.$.show.textContent = data.detail.response;
            this.response = data.detail.response;
            /*this._fillrow1();*/
            this.makeRows();
          },
          _fillrow1: function(index){
            var node = this.response.dashboard.rows[index].panels[index].title;
            this.title= node;
            return  node;
            //alert(1);
          },
          rowheight: function(index){
            return this.rows[index].height;
          },
          makeRows: function() {
            this.rows = this.response.dashboard.rows;
          },
          thisRow: function(index){
            return this.response.dashboard.rows[index]
          }
          /*translateResponse: function() {
            for (var prop in this.responce) {
            }
          }*/
      });

    </script>
</dom-module>
